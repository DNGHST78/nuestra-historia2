<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nuestra Historia â¤ï¸</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after { margin:0; padding:0; box-sizing:border-box; }

:root {
  --rose: #d4145a;
  --pink: #ff6b9d;
  --dark: #050008;
}

html { scroll-behavior: smooth; }

body {
  background-color: var(--dark);
  font-family: 'Cormorant Garamond', serif;
  overflow-x: hidden;
  color: #fff;
  perspective: 1200px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FONDO NOCTURNO â€” mismo que flores
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.night {
  position: fixed; inset: 0; z-index: 0;
  filter: blur(0.1vmin);
  background-image:
    radial-gradient(ellipse at top,    transparent 0%, var(--dark)),
    radial-gradient(ellipse at bottom, var(--dark),    rgba(212,20,90,0.18)),
    repeating-linear-gradient(220deg, #000 0px,#000 19px, transparent 19px, transparent 22px),
    repeating-linear-gradient(189deg, #000 0px,#000 19px, transparent 19px, transparent 22px),
    repeating-linear-gradient(148deg, #000 0px,#000 19px, transparent 19px, transparent 22px),
    linear-gradient(90deg, rgba(180,10,70,0.5), rgba(255,80,140,0.35));
  pointer-events: none;
}

/* Orbs de luz que se mueven â€” misma tÃ©cnica que flores */
.orb {
  position: fixed; border-radius: 50%;
  filter: blur(80px); pointer-events: none; z-index: 0;
  animation: orbFloat linear infinite alternate;
}
.orb-1 {
  width:60vmax; height:60vmax;
  background: radial-gradient(circle, rgba(212,20,90,0.12), transparent 70%);
  top:-20vmax; left:-20vmax;
  animation-duration: 18s;
}
.orb-2 {
  width:50vmax; height:50vmax;
  background: radial-gradient(circle, rgba(255,107,157,0.09), transparent 70%);
  bottom:-15vmax; right:-15vmax;
  animation-duration: 24s; animation-delay: -8s;
}
.orb-3 {
  width:40vmax; height:40vmax;
  background: radial-gradient(circle, rgba(140,5,60,0.1), transparent 70%);
  top:40%; left:30%;
  animation-duration: 14s; animation-delay: -4s;
}
@keyframes orbFloat {
  0%   { transform: translate(0,0) scale(1); }
  33%  { transform: translate(3vmax,-4vmax) scale(1.1); }
  66%  { transform: translate(-2vmax,3vmax) scale(0.95); }
  100% { transform: translate(4vmax,2vmax) scale(1.05); }
}

/* Canvas de partÃ­culas */
#dustCanvas { position:fixed; inset:0; pointer-events:none; z-index:1; }

/* Canvas de pÃ©talos */
#petalsCanvas { position:fixed; inset:0; pointer-events:none; z-index:2; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOCK SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.lock-screen {
  position:fixed; inset:0; z-index:9999;
  display:flex; align-items:center; justify-content:center;
  background:
    radial-gradient(ellipse at 30% 40%, rgba(212,20,90,0.12), transparent 60%),
    radial-gradient(ellipse at 70% 70%, rgba(140,5,60,0.10), transparent 60%),
    #050008;
  transition: opacity 1.8s ease, filter 1.8s ease;
  overflow: hidden;
}
/* Estrellas en lock */
.lock-screen::before {
  content:'';
  position:absolute; inset:0;
  background-image:
    repeating-linear-gradient(220deg,#000 0px,#000 19px,transparent 19px,transparent 22px),
    repeating-linear-gradient(189deg,#000 0px,#000 19px,transparent 19px,transparent 22px),
    linear-gradient(90deg,rgba(180,10,70,0.4),rgba(255,80,140,0.3));
  filter: blur(0.1vmin);
}
.lock-screen.unlocking { opacity:0; filter:blur(40px) brightness(4) saturate(2); }
.lock-screen.hidden    { display:none; }

.lock-inner {
  position:relative; z-index:2;
  animation: lockAppear 1.2s cubic-bezier(.2,0,.2,1);
  text-align:center;
}
@keyframes lockAppear {
  0%   { opacity:0; transform:scale(.75) translateY(50px); }
  60%  { opacity:1; transform:scale(1.04) translateY(-5px); }
  100% { opacity:1; transform:scale(1) translateY(0); }
}

.lock-emoji {
  font-size:72px;
  display:block; margin-bottom:30px;
  animation: lockSway 3.5s ease-in-out infinite;
  filter: drop-shadow(0 0 30px rgba(212,20,90,0.9));
}
@keyframes lockSway {
  0%,100% { transform:translateY(0) rotate(-5deg) scale(1); }
  50%     { transform:translateY(-18px) rotate(5deg) scale(1.1); }
}

.lock-title {
  font-family:'Dancing Script',cursive;
  font-size: clamp(30px,5vw,52px);
  color:#fff;
  text-shadow: 0 0 40px rgba(212,20,90,0.9), 0 0 80px rgba(212,20,90,0.4);
  margin-bottom:6px; letter-spacing:1px;
}
.lock-hint {
  font-family:'Cormorant Garamond',serif;
  font-size:18px; font-style:italic;
  color:rgba(255,107,157,0.8); margin-bottom:40px;
}

.display-wrap {
  background:
    linear-gradient(145deg,rgba(30,5,15,0.98),rgba(10,0,5,0.99));
  border:1px solid rgba(212,20,90,0.5);
  border-radius:18px; padding:20px 30px;
  margin-bottom:32px;
  box-shadow: inset 0 0 40px rgba(0,0,0,.9), 0 0 30px rgba(212,20,90,0.3);
}
.display-text {
  font-family:'Courier New',monospace;
  font-size:36px; letter-spacing:12px;
  color:var(--pink);
  text-shadow:0 0 20px rgba(255,107,157,0.9);
}

.keypad {
  display:grid; grid-template-columns:repeat(3,78px);
  gap:12px; justify-content:center; margin-bottom:22px;
}
.key {
  width:78px; height:78px;
  background:linear-gradient(145deg,rgba(50,10,28,0.95),rgba(20,3,12,0.98));
  border:1px solid rgba(212,20,90,0.35);
  border-radius:18px; color:#fff;
  font-size:24px; font-weight:600; cursor:pointer;
  transition:all .2s; display:flex; align-items:center; justify-content:center;
  box-shadow:0 6px 20px rgba(0,0,0,.6), 0 0 0 0 rgba(212,20,90,0);
}
.key:hover {
  background:linear-gradient(145deg,rgba(212,20,90,.45),rgba(150,10,60,.5));
  border-color:var(--rose); transform:translateY(-3px) scale(1.05);
  box-shadow:0 10px 30px rgba(212,20,90,.4);
}
.key:active { transform:scale(.95); }
.key.clear  { grid-column:span 2; background:linear-gradient(145deg,rgba(70,8,25,.9),rgba(40,4,16,.95)); }
.key.enter  {
  background:linear-gradient(145deg,var(--rose),#8b0030);
  border-color:var(--rose);
  animation:enterPulse 2s ease-in-out infinite;
}
@keyframes enterPulse {
  0%,100%{box-shadow:0 6px 20px rgba(212,20,90,.4), 0 0 0 0 rgba(212,20,90,.3);}
  50%    {box-shadow:0 6px 40px rgba(212,20,90,.8), 0 0 0 8px rgba(212,20,90,.1);}
}
.lock-error { min-height:20px; font-size:15px; color:rgba(255,100,130,.9); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN CONTENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.main-content {
  opacity:0; visibility:hidden;
  transition:opacity 2s ease, filter 2s ease;
}
.main-content.visible {
  opacity:1; visibility:visible;
  animation:mainReveal 2.5s cubic-bezier(.2,0,.2,1);
}
.main-content.exiting {
  opacity:0; filter:blur(15px);
  transition:opacity 1s ease, filter 1s ease;
}
@keyframes mainReveal {
  0%  { opacity:0; filter:blur(25px) brightness(3) saturate(1.5); transform:scale(.96); }
  100%{ opacity:1; filter:none; transform:scale(1); }
}

/* â”€â”€ DÃ­as contador â”€â”€ */
.days-counter {
  position:fixed; top:24px; right:24px; z-index:500;
  background:linear-gradient(145deg,rgba(25,5,15,0.97),rgba(12,2,8,0.99));
  border:1px solid rgba(212,20,90,0.4);
  border-radius:22px; padding:20px 28px; text-align:center;
  box-shadow:0 0 50px rgba(212,20,90,.2), inset 0 0 30px rgba(212,20,90,.04);
  backdrop-filter:blur(20px);
  animation:slideFromRight .9s cubic-bezier(.2,0,.2,1);
  min-width:170px;
}
@keyframes slideFromRight { from{transform:translateX(200px);opacity:0;} }
.counter-num {
  font-family:'Playfair Display',serif; font-weight:700;
  font-size:48px; line-height:1;
  background:linear-gradient(135deg,#ff9dc0,var(--pink),var(--rose));
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
}
.counter-lbl { font-size:12px; color:rgba(255,107,157,.6); margin-top:6px; letter-spacing:2px; }

/* â”€â”€ HEARTS BG â”€â”€ */
.hearts-bg { position:fixed;inset:0;pointer-events:none;z-index:1;overflow:hidden; }
.heart-float {
  position:absolute; font-size:16px;
  animation:heartRise linear infinite;
  opacity:.15; color:var(--rose);
}
@keyframes heartRise {
  0%  {transform:translateY(110vh) rotate(0deg); opacity:0;}
  5%  {opacity:.15;}
  95% {opacity:.15;}
  100%{transform:translateY(-80px) rotate(360deg); opacity:0;}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SECCIONES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.section {
  min-height:100vh;
  display:flex; align-items:center; justify-content:center; flex-direction:column;
  position:relative; z-index:3; padding:80px 30px;
  opacity:0; transform:translateY(70px);
  transition:opacity 1.3s cubic-bezier(.4,0,.2,1), transform 1.3s cubic-bezier(.4,0,.2,1);
}
.section.show { opacity:1; transform:none; }

/* Separador entre secciones */
.sep {
  position:absolute; bottom:0; left:50%; transform:translateX(-50%);
  width:1px; height:80px;
  background:linear-gradient(to bottom,rgba(212,20,90,.5),transparent);
}
.sep::before {
  content:''; position:absolute; top:0; left:50%; transform:translateX(-50%);
  width:6px; height:6px; border-radius:50%;
  background:var(--rose);
  box-shadow:0 0 15px var(--rose);
}

/* â”€â”€ HERO â”€â”€ */
.hero {
  background:radial-gradient(ellipse at 50% 60%,rgba(212,20,90,0.1),transparent 65%);
}

.title-wrap {
  text-align:center; cursor:pointer; user-select:none;
  margin-bottom:20px; position:relative;
}

.main-title {
  font-family:'Dancing Script',cursive;
  font-size:clamp(60px,14vw,150px); font-weight:700;
  line-height:.95;
  background:linear-gradient(135deg,#fff 0%,#ffc8d8 20%,var(--pink) 45%,var(--rose) 70%,#ff9dc0 100%);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
  animation:titleGlow 5s ease-in-out infinite;
  filter:drop-shadow(0 0 60px rgba(212,20,90,.5));
  transition:transform .4s cubic-bezier(.2,0,.2,1);
}
.main-title:hover { transform:scale(1.04); }
@keyframes titleGlow {
  0%,100%{filter:drop-shadow(0 0 40px rgba(212,20,90,.4));}
  50%    {filter:drop-shadow(0 0 80px rgba(212,20,90,.7)) drop-shadow(0 0 120px rgba(255,107,157,.3));}
}

.main-sub {
  font-family:'Cormorant Garamond',serif; font-style:italic;
  font-size:clamp(16px,2.5vw,26px);
  color:rgba(255,180,200,.65); letter-spacing:5px; margin-top:12px;
}

/* LÃ­nea decorativa bajo tÃ­tulo */
.title-line {
  width:0; height:1px; margin:24px auto 0;
  background:linear-gradient(90deg,transparent,var(--rose),transparent);
  animation:lineGrow 2s 1s ease-out forwards;
}
@keyframes lineGrow { to{width:200px;} }

/* â”€â”€ Botones de entrada â”€â”€ */
.entry-row {
  display:flex; gap:22px; margin-top:52px;
  flex-wrap:wrap; justify-content:center;
}

.entry-btn {
  position:relative; overflow:hidden;
  padding:20px 48px;
  background:linear-gradient(145deg,rgba(30,5,18,0.96),rgba(15,2,9,0.99));
  border:1px solid rgba(212,20,90,.4); border-radius:60px;
  font-family:'Playfair Display',serif; font-size:17px;
  color:rgba(255,190,210,.85);
  cursor:pointer; transition:all .5s cubic-bezier(.2,0,.2,1);
  box-shadow:0 0 40px rgba(212,20,90,.12), inset 0 0 25px rgba(212,20,90,.04);
  display:flex; align-items:center; gap:14px;
  backdrop-filter:blur(10px);
  --mx:50%; --my:50%;
}
/* Glow radial que sigue al hover */
.entry-btn::before {
  content:'';
  position:absolute; inset:0;
  background:radial-gradient(circle at var(--mx) var(--my), rgba(212,20,90,.22), transparent 55%);
  opacity:0; transition:opacity .4s;
}
.entry-btn:hover::before { opacity:1; }
.entry-btn::after {
  content:'';
  position:absolute; top:0; left:-100%; width:60%; height:100%;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,.06),transparent);
  transition:left .6s ease;
}
.entry-btn:hover::after { left:150%; }
.entry-btn:hover {
  transform:translateY(-7px) scale(1.02);
  border-color:rgba(212,20,90,.7);
  box-shadow:0 20px 60px rgba(212,20,90,.35), inset 0 0 40px rgba(212,20,90,.07);
  color:#fff;
}
.btn-icon { font-size:28px; transition:transform .5s cubic-bezier(.2,0,.2,1); display:inline-block; }
.entry-btn:hover .btn-icon { transform:scale(1.35) rotate(12deg); }

/* Scroll hint */
.scroll-hint {
  position:absolute; bottom:36px;
  font-size:11px; letter-spacing:4px; text-transform:uppercase;
  color:rgba(212,20,90,.45);
  animation:hintBob 2.5s ease-in-out infinite;
}
@keyframes hintBob {
  0%,100%{opacity:.4;transform:translateY(0);}
  50%    {opacity:1; transform:translateY(-10px);}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TIMELINE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.timeline-section {
  background:radial-gradient(ellipse at 50% 80%,rgba(212,20,90,.07),transparent 60%);
}

.sec-title {
  font-family:'Playfair Display',serif;
  font-size:clamp(30px,5vw,50px); letter-spacing:3px;
  color:#fff; text-align:center; margin-bottom:70px;
  position:relative;
}
.sec-title em { color:var(--rose); font-style:normal; }
.sec-title::after {
  content:'';
  position:absolute; bottom:-22px; left:50%; transform:translateX(-50%);
  width:50px; height:2px; border-radius:2px;
  background:linear-gradient(90deg,transparent,var(--rose),transparent);
  box-shadow:0 0 15px var(--rose);
}

.timeline { max-width:920px; width:100%; position:relative; }
.timeline::before {
  content:'';
  position:absolute; left:50%; transform:translateX(-50%);
  width:1px; height:100%;
  background:linear-gradient(180deg,transparent,rgba(212,20,90,.6),rgba(255,107,157,.4),transparent);
  box-shadow:0 0 20px rgba(212,20,90,.4);
}

.tl-item {
  display:flex; align-items:center; margin:55px 0; position:relative; cursor:pointer;
}
.tl-item:nth-child(odd) { flex-direction:row-reverse; }

.tl-dot {
  position:absolute; left:50%; transform:translateX(-50%);
  width:16px; height:16px; border-radius:50%; z-index:5;
  background:var(--rose);
  border:3px solid var(--dark);
  box-shadow:0 0 0 3px rgba(212,20,90,.4), 0 0 25px rgba(212,20,90,.7);
  transition:all .4s;
  animation:dotBreath 3s ease-in-out infinite;
}
@keyframes dotBreath {
  0%,100%{box-shadow:0 0 0 3px rgba(212,20,90,.3),0 0 20px rgba(212,20,90,.4);}
  50%    {box-shadow:0 0 0 7px rgba(212,20,90,.15),0 0 45px rgba(212,20,90,.8);}
}
.tl-item:hover .tl-dot {
  transform:translateX(-50%) scale(1.8);
  box-shadow:0 0 0 10px rgba(212,20,90,.1),0 0 60px rgba(212,20,90,1);
}

.tl-card {
  width:44%; position:relative; overflow:hidden;
  background:linear-gradient(145deg,rgba(28,6,16,0.97),rgba(14,2,8,0.99));
  border:1px solid rgba(212,20,90,.2); border-radius:24px; padding:32px 30px;
  box-shadow:0 15px 50px rgba(0,0,0,.7), inset 0 0 25px rgba(212,20,90,.02);
  transition:all .5s cubic-bezier(.2,0,.2,1);
}
/* Borde top con glow */
.tl-card::before {
  content:'';
  position:absolute; top:0; left:0; right:0; height:1px;
  background:linear-gradient(90deg,transparent,rgba(212,20,90,.6),transparent);
  box-shadow:0 0 10px rgba(212,20,90,.3);
}
/* Shimmer */
.tl-card::after {
  content:'';
  position:absolute; inset:0;
  background:linear-gradient(45deg,transparent 40%,rgba(255,107,157,.04) 50%,transparent 60%);
  animation:cardSheen 5s ease-in-out infinite;
}
@keyframes cardSheen {
  0%,100%{transform:translateX(-100%) translateY(-100%);}
  50%    {transform:translateX(100%) translateY(100%);}
}
.tl-item:hover .tl-card {
  transform:translateY(-12px) scale(1.025);
  border-color:rgba(212,20,90,.5);
  box-shadow:0 30px 80px rgba(212,20,90,.22);
}
.tl-date {
  font-size:11px; letter-spacing:3px; text-transform:uppercase;
  color:var(--rose); margin-bottom:9px; opacity:.85;
}
.tl-title {
  font-family:'Playfair Display',serif; font-size:22px; color:#fff;
  margin-bottom:10px; font-weight:700;
}
.tl-text { font-size:16px; color:rgba(255,180,200,.55); line-height:1.75; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MENSAJES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.messages-section {
  background:radial-gradient(ellipse at 30% 50%,rgba(212,20,90,.07),transparent 55%);
}

.msg-grid {
  display:grid; grid-template-columns:repeat(auto-fit,minmax(270px,1fr));
  gap:26px; max-width:1050px; width:100%;
}

.msg-card {
  position:relative; overflow:hidden;
  background:linear-gradient(145deg,rgba(28,6,16,0.97),rgba(14,2,8,0.99));
  border:1px solid rgba(212,20,90,.18); border-radius:28px;
  padding:50px 34px; min-height:250px;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer;
  box-shadow:0 15px 50px rgba(0,0,0,.7);
  transition:all .5s cubic-bezier(.2,0,.2,1);
}
.msg-card::before {
  content:'';
  position:absolute;inset:0;
  background:radial-gradient(circle at 50% 50%,rgba(212,20,90,.1),transparent 65%);
  opacity:0;transition:opacity .5s;
}
.msg-card:hover:not(.revealed)::before { opacity:1; }
.msg-card:hover:not(.revealed) {
  transform:translateY(-10px) scale(1.02);
  border-color:rgba(212,20,90,.5);
  box-shadow:0 25px 70px rgba(212,20,90,.2);
}

/* Ãcono sobre-carta */
.msg-icon {
  font-size:80px; transition:all .6s cubic-bezier(.2,0,.2,1);
  filter:drop-shadow(0 0 25px rgba(212,20,90,.5));
  animation:iconDrift 3.5s ease-in-out infinite;
}
@keyframes iconDrift {
  0%,100%{ transform:translateY(0) rotate(-4deg) scale(1); }
  50%    { transform:translateY(-10px) rotate(4deg) scale(1.07); }
}
.msg-hint {
  font-family:'Dancing Script',cursive;
  font-size:19px; color:rgba(255,107,157,.5);
  position:absolute; bottom:24px;
  transition:opacity .4s;
}
.msg-card.revealed .msg-icon  { opacity:0; transform:scale(0) rotate(180deg);}
.msg-card.revealed .msg-hint  { opacity:0; }

.msg-text {
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  padding:36px; text-align:center;
  font-family:'Cormorant Garamond',serif; font-style:italic;
  font-size:20px; color:rgba(255,200,215,.85); line-height:1.9;
  opacity:0; transition:opacity .6s .25s;
}
.msg-card.revealed .msg-text { opacity:1; }
.msg-card.revealed {
  border-color:rgba(212,20,90,.4);
  box-shadow:0 15px 60px rgba(212,20,90,.15);
}
.msg-card.revealed::before { opacity:.5; }

/* â”€â”€ BotÃ³n entrada cartas emocionales â”€â”€ */
.feelings-entry-btn {
  margin-top: 52px;
  position: relative; overflow: hidden;
  padding: 20px 50px;
  background: linear-gradient(145deg, rgba(30,5,18,0.96), rgba(15,2,9,0.99));
  border: 1px solid rgba(212,20,90,.4); border-radius: 60px;
  font-family: 'Playfair Display', serif; font-size: 18px;
  color: rgba(255,190,210,.85);
  cursor: pointer; transition: all .5s cubic-bezier(.2,0,.2,1);
  box-shadow: 0 0 40px rgba(212,20,90,.12), inset 0 0 25px rgba(212,20,90,.04);
  display: flex; align-items: center; gap: 14px;
  backdrop-filter: blur(10px);
}
.feelings-entry-btn::before {
  content: '';
  position: absolute; inset: 0;
  background: radial-gradient(circle at 50% 50%, rgba(212,20,90,.18), transparent 60%);
  opacity: 0; transition: opacity .4s;
}
.feelings-entry-btn:hover::before { opacity: 1; }
.feelings-entry-btn:hover {
  transform: translateY(-6px) scale(1.02);
  border-color: rgba(212,20,90,.7);
  box-shadow: 0 20px 60px rgba(212,20,90,.3);
  color: #fff;
}
.feelings-btn-icon { font-size: 26px; animation: iconDrift 3s ease-in-out infinite; display:inline-block; }
.feelings-btn-arrow {
  font-size: 20px; color: rgba(212,20,90,.7);
  animation: hintBob 2s ease-in-out infinite;
  display: inline-block;
}

/* â”€â”€ SecciÃ³n cartas emocionales â”€â”€ */
.feelings-section {
  background: radial-gradient(ellipse at 50% 40%, rgba(212,20,90,.07), transparent 65%);
  padding-top: 100px;
}

.feelings-sub {
  font-family: 'Cormorant Garamond', serif; font-style: italic;
  font-size: 20px; color: rgba(255,180,200,.5);
  margin-top: -40px; margin-bottom: 56px;
  letter-spacing: 1px;
}

.feelings-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 22px;
  max-width: 1100px; width: 100%;
}

/* Carta emocional */
.feeling-card {
  position: relative;
  height: 220px;
  cursor: pointer;
  border-radius: 24px;
  transition: transform .4s cubic-bezier(.2,0,.2,1);
  transform-style: preserve-3d;
}
.feeling-card:hover:not(.open) { transform: translateY(-8px) scale(1.03); }
.feeling-card.open { transform: none !important; cursor: default; }

/* Frente */
.feeling-front {
  position: absolute; inset: 0;
  background: linear-gradient(145deg, rgba(28,6,16,.97), rgba(14,2,8,.99));
  border: 1px solid rgba(212,20,90,.2); border-radius: 24px;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center; gap: 14px;
  transition: opacity .4s, transform .4s;
  box-shadow: 0 15px 50px rgba(0,0,0,.7);
  overflow: hidden;
}
.feeling-front::before {
  content: '';
  position: absolute; inset: 0;
  background: radial-gradient(circle at 50% 50%, rgba(212,20,90,.08), transparent 65%);
  opacity: 0; transition: opacity .4s;
}
.feeling-card:hover:not(.open) .feeling-front::before { opacity: 1; }
.feeling-front::after {
  content: '';
  position: absolute; top: 0; left: 0; right: 0; height: 1px;
  background: linear-gradient(90deg, transparent, rgba(212,20,90,.5), transparent);
}
.feeling-emoji {
  font-size: 48px;
  animation: iconDrift 4s ease-in-out infinite;
  filter: drop-shadow(0 0 12px rgba(212,20,90,.4));
  display: inline-block;
}
.feeling-label {
  font-family: 'Dancing Script', cursive;
  font-size: 18px; color: rgba(255,190,210,.75);
  text-align: center; padding: 0 16px;
  line-height: 1.4;
}
.feeling-card.open .feeling-front {
  opacity: 0; pointer-events: none;
  transform: scale(.92);
}

/* Reverso */
.feeling-back {
  position: absolute; inset: 0;
  border-radius: 24px; overflow: hidden;
  opacity: 0; pointer-events: none;
  transition: opacity .5s .15s;
  background: linear-gradient(145deg, rgba(35,8,20,.99), rgba(18,3,12,1));
  border: 1px solid rgba(212,20,90,.35);
  box-shadow: 0 20px 60px rgba(212,20,90,.2), inset 0 0 40px rgba(212,20,90,.04);
}
.feeling-back::before {
  content: '';
  position: absolute; top: 0; left: 0; right: 0; height: 1px;
  background: linear-gradient(90deg, transparent, var(--rose), transparent);
  box-shadow: 0 0 12px rgba(212,20,90,.4);
}
.feeling-card.open .feeling-back { opacity: 1; pointer-events: all; }

.feeling-back-inner {
  height: 100%; display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  padding: 28px 24px; gap: 18px; overflow-y: auto;
}
.feeling-back-inner::-webkit-scrollbar { width: 3px; }
.feeling-back-inner::-webkit-scrollbar-thumb { background: rgba(212,20,90,.3); border-radius: 3px; }

.feeling-back-inner p {
  font-family: 'Cormorant Garamond', serif; font-style: italic;
  font-size: 16px; line-height: 1.85;
  color: rgba(255,200,215,.8); text-align: center;
}

.feeling-close {
  flex-shrink: 0;
  background: transparent;
  border: 1px solid rgba(212,20,90,.35); border-radius: 30px;
  color: rgba(255,107,157,.6); font-size: 13px; letter-spacing: 1px;
  padding: 8px 20px; cursor: pointer;
  transition: all .3s;
  font-family: 'Cormorant Garamond', serif;
}
.feeling-close:hover {
  background: rgba(212,20,90,.15);
  border-color: var(--rose); color: #fff;
  transform: scale(1.05);
}

@media (max-width: 768px) {
  .feelings-grid { grid-template-columns: repeat(2, 1fr); gap: 14px; }
  .feeling-card  { height: 190px; }
  .feeling-emoji { font-size: 38px; }
  .feeling-label { font-size: 15px; }
  .feelings-entry-btn { padding: 16px 30px; font-size: 16px; }
}
.love-section {
  background:radial-gradient(ellipse at 65% 45%,rgba(212,20,90,.08),transparent 60%);
}

.love-card {
  max-width:790px; width:100%; position:relative; overflow:hidden;
  background:linear-gradient(145deg,rgba(28,6,16,0.98),rgba(12,2,7,0.99));
  border:1px solid rgba(212,20,90,.3); border-radius:34px; padding:66px 60px;
  box-shadow:0 30px 80px rgba(0,0,0,.8), 0 0 80px rgba(212,20,90,.12);
  transition:all .6s cubic-bezier(.2,0,.2,1);
}
.love-card::before {
  content:'';
  position:absolute; top:0; left:0; right:0; height:2px;
  background:linear-gradient(90deg,transparent,var(--rose),var(--pink),var(--rose),transparent);
  box-shadow:0 0 20px rgba(212,20,90,.5);
}
.love-card::after {
  content:'â¤';
  position:absolute; bottom:-30px; right:-20px;
  font-size:220px; color:rgba(212,20,90,.025); line-height:1;
  pointer-events:none;
}
.love-card:hover {
  transform:translateY(-8px);
  box-shadow:0 40px 100px rgba(0,0,0,.8), 0 0 100px rgba(212,20,90,.18);
}
.love-card h2 {
  font-family:'Dancing Script',cursive;
  font-size:clamp(36px,5vw,58px); color:#fff;
  text-align:center; margin-bottom:34px;
  text-shadow:0 0 40px rgba(212,20,90,.6);
}
.love-card p {
  font-size:clamp(18px,1.8vw,22px); color:rgba(255,185,205,.65);
  line-height:2.05; text-align:justify; font-weight:300; letter-spacing:.3px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   REPRODUCTOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.music-player {
  position:fixed; top:24px; left:24px; z-index:6000;
  background:linear-gradient(145deg,rgba(22,5,14,0.99),rgba(10,2,7,1));
  border:1px solid rgba(212,20,90,.35); border-radius:26px; padding:22px 26px;
  box-shadow:0 20px 60px rgba(0,0,0,.8), 0 0 50px rgba(212,20,90,.12);
  backdrop-filter:blur(20px);
  transition:all .4s cubic-bezier(.2,0,.2,1);
  min-width:200px;
}
.music-player:hover {
  transform:translateY(-5px);
  box-shadow:0 28px 70px rgba(0,0,0,.8), 0 0 60px rgba(212,20,90,.2);
}
/* Barra top brillante */
.music-player::before {
  content:'';
  position:absolute; top:0;left:0;right:0;height:1px;border-radius:26px 26px 0 0;
  background:linear-gradient(90deg,transparent,rgba(212,20,90,.6),transparent);
}
.track-name {
  font-family:'Cormorant Garamond',serif; font-size:13px; letter-spacing:1px;
  color:rgba(255,107,157,.6); text-align:center; margin-bottom:16px;
}
.controls { display:flex; gap:12px; align-items:center; justify-content:center; }
.mbtn {
  background:linear-gradient(145deg,rgba(212,20,90,.65),rgba(140,8,50,.75));
  border:none; border-radius:50%; color:#fff;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; transition:all .3s;
  box-shadow:0 4px 15px rgba(212,20,90,.3);
}
.mbtn       { width:46px; height:46px; font-size:17px; }
.mbtn.play  { width:56px; height:56px; font-size:22px;
  box-shadow:0 0 0 0 rgba(212,20,90,.4);
  animation:playGlow 2.5s ease-in-out infinite;
}
@keyframes playGlow {
  0%,100%{box-shadow:0 4px 15px rgba(212,20,90,.3);}
  50%    {box-shadow:0 4px 30px rgba(212,20,90,.7), 0 0 0 6px rgba(212,20,90,.1);}
}
.mbtn:hover  { transform:scale(1.18); box-shadow:0 6px 25px rgba(212,20,90,.7); }
.mbtn:active { transform:scale(.93); }
.vol-row { margin-top:13px; }
.vol-row input[type=range] { width:100%; accent-color:var(--rose); cursor:pointer; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MUSEO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.museum-overlay {
  position:fixed; inset:0; z-index:4000;
  background:linear-gradient(135deg,#080808,#111,#080808);
  opacity:0; visibility:hidden;
  transition:opacity 1.5s ease,visibility 1.5s,filter 1.5s;
  filter:blur(10px);
  overflow:hidden;
}
.museum-overlay::before {
  content:'';
  position:absolute; inset:0;
  background:
    radial-gradient(ellipse at 50% 80%,rgba(255,107,157,.07),transparent 60%),
    repeating-linear-gradient(220deg,#000 0px,#000 19px,transparent 19px,transparent 22px),
    repeating-linear-gradient(189deg,#000 0px,#000 19px,transparent 19px,transparent 22px);
  filter:blur(0.1vmin);
}
.museum-overlay.open { opacity:1; visibility:visible; filter:none; }

.museum-back {
  position:fixed; top:35px; left:35px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.15); border-radius:50px;
  color:rgba(255,255,255,.8);
  font-family:'Playfair Display',serif; font-size:17px;
  padding:13px 28px; cursor:pointer; z-index:4001;
  transition:all .4s; backdrop-filter:blur(10px);
}
.museum-back:hover {
  background:rgba(212,20,90,.2); border-color:var(--rose);
  transform:translateX(-7px); color:#fff;
}

.museum-head { text-align:center; padding:60px 20px 28px; position:relative; z-index:2; }
.museum-ttl {
  font-family:'Playfair Display',serif;
  font-size:clamp(38px,7vw,72px); color:#fff;
  text-shadow:0 0 50px rgba(255,107,157,.5);
  animation:fadeSlideDown .9s ease-out;
}
.museum-sub {
  font-family:'Cormorant Garamond',serif; font-style:italic;
  font-size:20px; color:rgba(255,255,255,.45); margin-top:8px;
  animation:fadeSlideDown .9s .1s ease-out both;
}
@keyframes fadeSlideDown {
  from{opacity:0;transform:translateY(-25px);}
  to{opacity:1;transform:none;}
}

/* â”€â”€ Moodboard scroll â”€â”€ */
.museum-scroll {
  height: calc(100vh - 180px);
  overflow-x: auto; overflow-y: hidden;
  padding: 16px 50px 24px;
  scroll-behavior: smooth;
  position: relative; z-index: 2;
}
.museum-scroll::-webkit-scrollbar { height: 3px; }
.museum-scroll::-webkit-scrollbar-track { background: transparent; }
.museum-scroll::-webkit-scrollbar-thumb { background: rgba(212,20,90,.35); border-radius: 3px; }

/* Una sola fila que desplaza horizontal, con 2 "alturas" intercaladas */
.moodboard {
  display: flex;
  align-items: center;
  gap: 18px;
  min-width: max-content;
  padding: 10px 0 10px;
}

/* Columnas de agrupaciÃ³n: cada columna puede tener 1 o 2 fotos apiladas */
.mb-col {
  display: flex;
  flex-direction: column;
  gap: 18px;
  align-items: center;
}

/* Foto individual â€” mantiene 9:16 */
.mb-frame {
  position: relative; overflow: hidden;
  border-radius: 12px;
  cursor: pointer;
  flex-shrink: 0;
  transition: transform .5s cubic-bezier(.2,0,.2,1), box-shadow .5s;
}
.mb-frame:hover {
  transform: translateY(-14px) scale(1.025);
  box-shadow: 0 30px 70px rgba(0,0,0,.9), 0 0 40px rgba(212,20,90,.3) !important;
}
.mb-frame img {
  width: 100%; height: 100%;
  object-fit: cover; display: block;
  transition: transform .6s cubic-bezier(.2,0,.2,1);
}
.mb-frame:hover img { transform: scale(1.07); }

/* Shimmer en cada foto */
.mb-frame::before {
  content: '';
  position: absolute; inset: 0; z-index: 2;
  background: linear-gradient(120deg, transparent 30%, rgba(255,107,157,.07) 50%, transparent 70%);
  animation: mbSheen 6s ease-in-out infinite;
  pointer-events: none;
}
@keyframes mbSheen {
  0%,100% { transform: translateX(-150%); }
  50%     { transform: translateX(150%); }
}

/* Spotlight */
.mb-frame::after {
  content: '';
  position: absolute; inset: 0; z-index: 3;
  background: radial-gradient(ellipse at 30% 20%, rgba(255,255,255,.05), transparent 65%);
  pointer-events: none;
}

/* NÃºmero de foto â€” minimalista, aparece en hover */
.mb-num {
  position: absolute; bottom: 12px; right: 14px; z-index: 4;
  font-family: 'Playfair Display', serif;
  font-size: 13px; letter-spacing: 2px;
  color: rgba(255,255,255,.5);
  opacity: 0; transform: translateY(6px);
  transition: opacity .4s, transform .4s;
  pointer-events: none;
}
.mb-frame:hover .mb-num { opacity: 1; transform: none; }

/* CorazÃ³n al hover */
.mb-heart {
  position: absolute; top: 12px; left: 14px; z-index: 4;
  font-size: 18px;
  opacity: 0; transform: scale(.4);
  transition: opacity .4s .1s, transform .4s .1s;
  pointer-events: none;
  filter: drop-shadow(0 0 8px rgba(212,20,90,.8));
}
.mb-frame:hover .mb-heart { opacity: 1; transform: scale(1); }

/* Overlay rosado sutil al hover */
.mb-overlay {
  position: absolute; inset: 0; z-index: 1;
  background: linear-gradient(to top, rgba(212,20,90,.18), transparent 50%);
  opacity: 0; transition: opacity .5s;
  pointer-events: none;
}
.mb-frame:hover .mb-overlay { opacity: 1; }

/* TamaÃ±os â€” todos 9:16 */
.mb-lg  { width: 220px; height: 391px; box-shadow: 0 20px 60px rgba(0,0,0,.85); }   /* grande */
.mb-md  { width: 170px; height: 302px; box-shadow: 0 15px 50px rgba(0,0,0,.8); }    /* mediano */
.mb-sm  { width: 130px; height: 231px; box-shadow: 0 12px 40px rgba(0,0,0,.75); }   /* pequeÃ±o */

/* Borde sutil */
.mb-lg,.mb-md,.mb-sm {
  border: 1px solid rgba(255,255,255,.07);
}

.museum-hint {
  position: fixed; bottom: 28px; left: 50%; transform: translateX(-50%);
  background: rgba(255,255,255,.04); border: 1px solid rgba(255,255,255,.09);
  padding: 10px 34px; border-radius: 50px;
  font-family: 'Cormorant Garamond', serif; font-style: italic;
  font-size: 15px; color: rgba(255,255,255,.45);
  backdrop-filter: blur(10px); z-index: 4001;
  animation: hintBob 2.5s ease-in-out infinite;
  pointer-events: none;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width:768px) {
  .keypad{grid-template-columns:repeat(3,68px);gap:10px;}
  .key{width:68px;height:68px;font-size:21px;}
  .days-counter{top:15px;right:15px;padding:15px 18px;}
  .counter-num{font-size:38px;}
  .timeline::before{left:22px;}
  .tl-item{flex-direction:row!important;padding-left:50px;}
  .tl-dot{left:22px;}
  .tl-card{width:100%;}
  .entry-row{flex-direction:column;align-items:center;}
  .entry-btn{width:270px;justify-content:center;}
  .love-card{padding:38px 26px;margin:0 12px;}
  .music-player{left:14px;top:14px;}
  .museum-back{top:18px;left:18px;padding:10px 20px;font-size:15px;}
  .mb-lg{width:160px;height:284px;}
  .mb-md{width:125px;height:222px;}
  .mb-sm{width:95px;height:169px;}
  .museum-scroll{padding:12px 20px;}
  .moodboard{gap:12px;}
}
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EASTER EGG
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.egg-screen {
  position: fixed; inset: 0; z-index: 19999;
  display: flex; align-items: center; justify-content: center;
  background: radial-gradient(ellipse at 50% 40%, rgba(212,20,90,.18), transparent 70%),
    #030005;
  opacity: 0; visibility: hidden;
  transition: opacity 1.2s ease, filter 1.2s ease;
  filter: blur(15px);
  overflow: hidden;
}
.egg-screen::before {
  content: '';
  position: absolute; inset: 0;
  background-image:
    repeating-linear-gradient(220deg,#000 0px,#000 19px,transparent 19px,transparent 22px),
    repeating-linear-gradient(189deg,#000 0px,#000 19px,transparent 19px,transparent 22px),
    linear-gradient(90deg,rgba(180,10,70,.4),rgba(255,80,140,.3));
  filter: blur(0.1vmin); z-index: 0;
}
.egg-screen.open {
  opacity: 1; visibility: visible; filter: none;
}

.egg-close {
  position: absolute; top: 35px; right: 35px; z-index: 2;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.18); border-radius: 50px;
  color: rgba(255,255,255,.75); font-size: 16px; letter-spacing: 1px;
  padding: 12px 26px; cursor: pointer;
  transition: all .4s; backdrop-filter: blur(10px);
  font-family: 'Cormorant Garamond', serif;
}
.egg-close:hover {
  background: rgba(212,20,90,.2); border-color: var(--rose);
  color: #fff; transform: scale(1.05);
}

.egg-content {
  position: relative; z-index: 2;
  display: flex; flex-direction: column;
  align-items: center; gap: 28px;
  animation: popIn .9s cubic-bezier(.2,0,.2,1);
  max-width: 90vw;
}

.egg-glow {
  position: absolute; inset: -80px;
  background: radial-gradient(circle, rgba(212,20,90,.2), transparent 65%);
  pointer-events: none; z-index: -1;
  animation: orbFloat 8s ease-in-out infinite alternate;
}

.egg-label {
  font-family: 'Dancing Script', cursive;
  font-size: clamp(22px, 4vw, 38px);
  color: #fff;
  text-shadow: 0 0 40px rgba(212,20,90,.9), 0 0 80px rgba(212,20,90,.4);
  letter-spacing: 2px; text-align: center;
  animation: titleGlow 3s ease-in-out infinite;
}

.egg-video {
  width: min(360px, 85vw);
  aspect-ratio: 9 / 16;
  border-radius: 20px;
  border: 1px solid rgba(212,20,90,.4);
  box-shadow:
    0 0 0 1px rgba(255,107,157,.08),
    0 30px 80px rgba(0,0,0,.9),
    0 0 80px rgba(212,20,90,.25);
  outline: none;
  background: #000;
  object-fit: cover;
}

@media (max-width: 768px) {
  .egg-close { top: 18px; right: 18px; padding: 10px 20px; }
  .egg-label  { font-size: 20px; }
}
</style>
</head>
<body>

<!-- â•â• FONDOS â•â• -->
<div class="night"></div>
<div class="orb orb-1"></div>
<div class="orb orb-2"></div>
<div class="orb orb-3"></div>
<canvas id="dustCanvas"></canvas>
<canvas id="petalsCanvas"></canvas>
<div class="hearts-bg" id="heartsContainer"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• LOCK SCREEN â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="lock-screen" id="lockScreen">
  <div class="lock-inner">
    <span class="lock-emoji">ğŸ”’</span>
    <h1 class="lock-title">Bienvenido a Nuestro Mundo</h1>
    <p class="lock-hint">ğŸ’• Ingresa la fecha de nuestro primer boteo ğŸ’•<br>
    <small style="opacity:.55;font-size:14px;">(Formato: DDMMAA)</small></p>

    <div class="display-wrap">
      <div class="display-text" id="display">_ _ _ _ _ _</div>
    </div>

    <div class="keypad">
      <button class="key" onclick="kp('1')">1</button>
      <button class="key" onclick="kp('2')">2</button>
      <button class="key" onclick="kp('3')">3</button>
      <button class="key" onclick="kp('4')">4</button>
      <button class="key" onclick="kp('5')">5</button>
      <button class="key" onclick="kp('6')">6</button>
      <button class="key" onclick="kp('7')">7</button>
      <button class="key" onclick="kp('8')">8</button>
      <button class="key" onclick="kp('9')">9</button>
      <button class="key clear" onclick="kpClear()">BORRAR</button>
      <button class="key" onclick="kp('0')">0</button>
      <button class="key enter" onclick="kpCheck()">âœ“</button>
    </div>
    <div class="lock-error" id="lockErr"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• MAIN â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="main-content" id="mainContent">

  <div class="days-counter">
    <div class="counter-num" id="daysCounter">0</div>
    <div class="counter-lbl">dÃ­as juntos â¤ï¸</div>
  </div>

  <!-- â”€â”€ HERO â”€â”€ -->
  <div class="section hero show">
    <div class="title-wrap" onclick="heartBurst(event)">
      <h1 class="main-title">Nuestra Historia</h1>
      <p class="main-sub">Un viaje de amor infinito</p>
      <div class="title-line"></div>
    </div>

    <div class="entry-row">
      <button class="entry-btn" id="btnMuseo" onclick="openMuseum()">
        <span class="btn-icon">ğŸ¨</span>
        <span>Museo de Nosotros</span>
      </button>
      <button class="entry-btn" id="btnFlores" onclick="goFlowers()">
        <span class="btn-icon">ğŸŒ»</span>
        <span>Campo de Flores</span>
      </button>
    </div>

    <div class="scroll-hint">DesplÃ¡zate para descubrir â†“</div>
    <div class="sep"></div>
  </div>

  <!-- â”€â”€ TIMELINE â”€â”€ -->
  <div class="section timeline-section">
    <h2 class="sec-title">Nuestro <em>Camino</em> Juntos</h2>
    <div class="timeline">

      <div class="tl-item">
        <div class="tl-dot"></div>
        <div class="tl-card">
          <div class="tl-date">08 Â· Agosto Â· 2024</div>
          <div class="tl-title">La primera vez que te vi</div>
          <div class="tl-text">La primera vez que te vi marcÃ³ el dÃ­a en que todo comenzÃ³ a tener sentidoâ€¦ porque ahÃ­ estabas tÃº.</div>
        </div>
      </div>

      <div class="tl-item">
        <div class="tl-dot"></div>
        <div class="tl-card">
          <div class="tl-date">07 Â· Septiembre Â· 2024</div>
          <div class="tl-title">Primera clase juntos en Cruz Roja</div>
          <div class="tl-text">Nuestro primer dÃ­a ahÃ­, sin saber que ese momento llegarÃ­a a tener tanto peso en nuestras vidas.</div>
        </div>
      </div>

      <div class="tl-item">
        <div class="tl-dot"></div>
        <div class="tl-card">
          <div class="tl-date">13 Â· Diciembre Â· 2024</div>
          <div class="tl-title">Nuestra primera vez formando equipo juntos</div>
          <div class="tl-text">El primer instante en que empezamos a conocernos de verdad, y cuando por primera vez te reÃ­ste de algo que te dije.</div>
        </div>
      </div>

      <div class="tl-item">
        <div class="tl-dot"></div>
        <div class="tl-card">
          <div class="tl-date">07 Â· Enero Â· 2025</div>
          <div class="tl-title">El dÃ­a que empezaste a gustarme</div>
          <div class="tl-text">La mejor decisiÃ³n que pude haber tomado fue agregarte a mi equipo; ese pequeÃ±o instante cambiÃ³ por completo mi vida.</div>
        </div>
      </div>

      <div class="tl-item">
        <div class="tl-dot"></div>
        <div class="tl-card">
          <div class="tl-date">10 Â· Febrero Â· 2025</div>
          <div class="tl-title">Nuestra primera salida juntos</div>
          <div class="tl-text">Una salida inesperada que se convirtiÃ³ en el inicio de algo que empezaba a tomar forma entre nosotros.</div>
        </div>
      </div>

      <div class="tl-item">
        <div class="tl-dot"></div>
        <div class="tl-card">
          <div class="tl-date">18 Â· Marzo Â· 2025</div>
          <div class="tl-title">Nuestro primer boteo juntos</div>
          <div class="tl-text">Un dÃ­a especial donde comenzamos a conocernos de verdad, y donde mis sentimientos por ti solo seguÃ­an creciendo.</div>
        </div>
      </div>

      <div class="tl-item">
        <div class="tl-dot"></div>
        <div class="tl-card">
          <div class="tl-date">21 Â· Mayo Â· 2025</div>
          <div class="tl-title">El fin de mis guardias de enfermerÃ­a pero el principio de algo mÃ¡s</div>
          <div class="tl-text">Ese dÃ­a terminÃ© mis guardias en enfermerÃ­a, pero tambiÃ©n confirmÃ© todo lo que sentÃ­a por ti. Supe que eras la mujer con la que querÃ­a compartir mi vida, y que no imaginaba un camino sin ti a mi lado.</div>
        </div>
      </div>

      <div class="tl-item">
        <div class="tl-dot"></div>
        <div class="tl-card">
          <div class="tl-date">13 Â· Junio Â· 2025</div>
          <div class="tl-title">El dÃ­a que decidÃ­ lo que querÃ­a</div>
          <div class="tl-text">Ese dÃ­a, entre risas y momentos compartidos, solo pensaba en cÃ³mo darte el anillo que habÃ­a elegido para ti. AÃºn guardo en mi memoria lo bella que estabas.</div>
        </div>
      </div>

      <div class="tl-item">
        <div class="tl-dot"></div>
        <div class="tl-card">
          <div class="tl-date">18 Â· Junio Â· 2025</div>
          <div class="tl-title">El inicio</div>
          <div class="tl-text">Fue el dÃ­a en que me lo confesaste, ambos sentÃ­amos lo mismo. Aquella madrugada me la pasÃ© en vela esperando tu respuesta, mientras tÃº ya te habÃ­as quedado dormida, hahaha.</div>
        </div>
      </div>

      <div class="tl-item">
        <div class="tl-dot"></div>
        <div class="tl-card">
          <div class="tl-date">Hoy Â· y Â· Siempre</div>
          <div class="tl-title">Para toda la vida</div>
          <div class="tl-text">Cada dÃ­a contigo se convierte en una nueva parte de la historia que comenzÃ³ sin saberlo y que deseo que nunca tenga final.</div>
        </div>
      </div>

    </div>
    <div class="sep"></div>
  </div>

  <!-- â”€â”€ MENSAJES â”€â”€ -->
  <div class="section messages-section">
    <h2 class="sec-title">Mensajes del <em>CorazÃ³n</em></h2>
    <div class="msg-grid">

      <div class="msg-card" onclick="revealMsg(this)">
        <div class="msg-icon">ğŸ’Œ</div>
        <div class="msg-hint">Toca para abrir</div>
        <p class="msg-text">"Eres la razÃ³n por la que creo en el amor verdadero. Cada dÃ­a a tu lado es un regalo que atesoro para siempre."</p>
      </div>

      <div class="msg-card" onclick="revealMsg(this)">
        <div class="msg-icon">ğŸ’Œ</div>
        <div class="msg-hint">Toca para abrir</div>
        <p class="msg-text">"Tu sonrisa ilumina mis dÃ­as mÃ¡s oscuros. Gracias por ser la luz que guÃ­a cada uno de mis pasos."</p>
      </div>

      <div class="msg-card" onclick="revealMsg(this)">
        <div class="msg-icon">ğŸ’Œ</div>
        <div class="msg-hint">Toca para abrir</div>
        <p class="msg-text">"Contigo encontrÃ© mi hogar, mi paz y mi felicidad completa. Te amo hoy, maÃ±ana y siempre, sin lÃ­mites."</p>
      </div>

      <div class="msg-card" onclick="revealMsg(this)">
        <div class="msg-icon">ğŸ’Œ</div>
        <div class="msg-hint">Toca para abrir</div>
        <p class="msg-text">"A tu lado aprendÃ­ que el amor no siempre llega con ruido, a veces llega en silencio y se queda."</p>
      </div>

      <div class="msg-card" onclick="revealMsg(this)">
        <div class="msg-icon">ğŸ’Œ</div>
        <div class="msg-hint">Toca para abrir</div>
        <p class="msg-text">"No fue un instante grande el que lo cambiÃ³ todo, fueron los pequeÃ±os momentos contigo."</p>
      </div>

      <div class="msg-card" onclick="revealMsg(this)">
        <div class="msg-icon">ğŸ’Œ</div>
        <div class="msg-hint">Toca para abrir</div>
        <p class="msg-text">"Si volviera atrÃ¡s, volverÃ­a a elegir cada instante que me llevÃ³ hasta ti."</p>
      </div>

    </div>

    <!-- BotÃ³n hacia secciÃ³n de cartas emocionales -->
    <button class="feelings-entry-btn" onclick="scrollToFeelings()">
      <span class="feelings-btn-icon">ğŸ«§</span>
      <span>Cartas para cada momento</span>
      <span class="feelings-btn-arrow">â†“</span>
    </button>

    <div class="sep"></div>
  </div>

  <!-- â”€â”€ CARTAS PARA CADA MOMENTO â”€â”€ -->
  <div class="section feelings-section" id="feelingsSection">
    <h2 class="sec-title">Cartas para <em>cada momento</em></h2>
    <p class="feelings-sub">Toca la carta que refleje cÃ³mo te sientes hoy</p>

    <div class="feelings-grid">

      <div class="feeling-card" onclick="openFeeling(this)">
        <div class="feeling-front">
          <div class="feeling-emoji">ğŸŒ§ï¸</div>
          <div class="feeling-label">Cuando te sientas mal</div>
        </div>
        <div class="feeling-back">
          <div class="feeling-back-inner">
            <p>"No todo lo que pesa es permanente. Hay dÃ­as que parecen nublarlo todo, pero incluso el cielo mÃ¡s gris guarda luz detrÃ¡s. Este momento no define tu historia, es solo una pÃ¡gina que estÃ¡s atravesando."</p>
            <button class="feeling-close" onclick="closeFeeling(event,this)">âœ• Cerrar</button>
          </div>
        </div>
      </div>

      <div class="feeling-card" onclick="openFeeling(this)">
        <div class="feeling-front">
          <div class="feeling-emoji">â˜€ï¸</div>
          <div class="feeling-label">Cuando estÃ©s feliz</div>
        </div>
        <div class="feeling-back">
          <div class="feeling-back-inner">
            <p>"Deja que esa alegrÃ­a exista sin miedo, sin pensar cuÃ¡nto durarÃ¡. Los momentos asÃ­ no estÃ¡n hechos para entenderse, sino para sentirse. La vida tambiÃ©n sabe ser suave contigo."</p>
            <button class="feeling-close" onclick="closeFeeling(event,this)">âœ• Cerrar</button>
          </div>
        </div>
      </div>

      <div class="feeling-card" onclick="openFeeling(this)">
        <div class="feeling-front">
          <div class="feeling-emoji">ğŸŒ€</div>
          <div class="feeling-label">Cuando estÃ©s ansiosa</div>
        </div>
        <div class="feeling-back">
          <div class="feeling-back-inner">
            <p>"No todo tiene que resolverse ahora. El mundo puede esperar mientras recuperas tu calma. No estÃ¡s hecha para cargar con todo al mismo tiempo."</p>
            <button class="feeling-close" onclick="closeFeeling(event,this)">âœ• Cerrar</button>
          </div>
        </div>
      </div>

      <div class="feeling-card" onclick="openFeeling(this)">
        <div class="feeling-front">
          <div class="feeling-emoji">ğŸ”¥</div>
          <div class="feeling-label">Cuando estÃ©s enojada</div>
        </div>
        <div class="feeling-back">
          <div class="feeling-back-inner">
            <p>"Tu enojo tambiÃ©n es una forma de amor propio. Hay cosas que importan tanto que duelen cuando no salen como esperabas. Sentirlo no te hace dÃ©bil, te hace humana."</p>
            <button class="feeling-close" onclick="closeFeeling(event,this)">âœ• Cerrar</button>
          </div>
        </div>
      </div>

      <div class="feeling-card" onclick="openFeeling(this)">
        <div class="feeling-front">
          <div class="feeling-emoji">ğŸŒ™</div>
          <div class="feeling-label">Cuando te sientas sola</div>
        </div>
        <div class="feeling-back">
          <div class="feeling-back-inner">
            <p>"La soledad no siempre es vacÃ­o. A veces es un espacio donde vuelves a encontrarte contigo misma. Incluso en el silencio sigues siendo compaÃ±Ã­a suficiente."</p>
            <button class="feeling-close" onclick="closeFeeling(event,this)">âœ• Cerrar</button>
          </div>
        </div>
      </div>

      <div class="feeling-card" onclick="openFeeling(this)">
        <div class="feeling-front">
          <div class="feeling-emoji">ğŸŒ±</div>
          <div class="feeling-label">Cuando dudes de ti</div>
        </div>
        <div class="feeling-back">
          <div class="feeling-back-inner">
            <p>"Has llegado mÃ¡s lejos de lo que imaginabas cuando todo empezÃ³. No eres la misma de antes, y eso ya dice mucho."</p>
            <button class="feeling-close" onclick="closeFeeling(event,this)">âœ• Cerrar</button>
          </div>
        </div>
      </div>

      <div class="feeling-card" onclick="openFeeling(this)">
        <div class="feeling-front">
          <div class="feeling-emoji">ğŸŒ«ï¸</div>
          <div class="feeling-label">Cuando nada tenga sentido</div>
        </div>
        <div class="feeling-back">
          <div class="feeling-back-inner">
            <p>"No todo necesita explicaciÃ³n para valer la pena. A veces el sentido aparece despuÃ©s de atravesar el caos."</p>
            <button class="feeling-close" onclick="closeFeeling(event,this)">âœ• Cerrar</button>
          </div>
        </div>
      </div>

      <div class="feeling-card" onclick="openFeeling(this)">
        <div class="feeling-front">
          <div class="feeling-emoji">ğŸ•¯ï¸</div>
          <div class="feeling-label">Cuando no puedas dormir</div>
        </div>
        <div class="feeling-back">
          <div class="feeling-back-inner">
            <p>"La noche no siempre es para descansar el cuerpo. A veces tambiÃ©n sirve para acomodar el alma."</p>
            <button class="feeling-close" onclick="closeFeeling(event,this)">âœ• Cerrar</button>
          </div>
        </div>
      </div>

    </div>
    <div class="sep"></div>
  </div>

  <!-- â”€â”€ CARTA â”€â”€ -->
  <div class="section love-section">
    <div class="love-card">
      <h2>Davia,</h2>
      <p>
        Sin duda alguna, eres todo lo que siempre soÃ±Ã© encontrar en este mundo. No hay manera de negarlo. Cada dÃ­a que pasa me recuerda por quÃ© estamos juntos y por quÃ© quiero seguir a tu lado, siempre.
        <br><br>
        Todos los aÃ±os que estuve solo no los cambiarÃ­a por nada, porque sÃ© que despuÃ©s de esa soledad llegaste tÃº. Quiero hacerte tan feliz como tÃº me haces a mÃ­, y aunque en estos meses he cometido errores, jamÃ¡s considerarÃ© un error haber pasado cada uno de esos dÃ­as contigo.
        <br><br>
        Te amo, te deseo y te aÃ±oro mÃ¡s de lo que las palabras pueden decir. Espero que podamos vivir juntos una vida larga y llena de cosas hermosas, porque estoy convencido de que el destino tiene algo grande reservado para los dos.
        <br><br>
        Siempre serÃ¡s mÃ­a, asÃ­ como yo tuyo.
        <br><br>
        <em>Te amo.</em>
        <br><br>
        <span style="color:rgba(255,107,157,.5);font-size:15px;letter-spacing:1px;">â€” P.D. De vez en cuando actualizarÃ© esta pÃ¡gina, por si quieres volver a pasarte por aquÃ­.</span>
      </p>
    </div>
  </div>

  <!-- â”€â”€ PLAYER â”€â”€ -->
  <div class="music-player">
    <div class="track-name" id="trackName">â™« Nuestra canciÃ³n</div>
    <div class="controls">
      <button class="mbtn" onclick="prevSong()">â®</button>
      <button class="mbtn play" onclick="togglePlay()" id="playBtn">â–¶</button>
      <button class="mbtn" onclick="nextSong()">â­</button>
    </div>
    <div class="vol-row">
      <input type="range" min="0" max="100" value="70" id="volSlider">
    </div>
    <audio id="player" src="cancion1.mp3"></audio>
  </div>

</div><!-- /main-content -->


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• MUSEO â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="museum-overlay" id="museumOverlay">
  <button class="museum-back" onclick="closeMuseum()">â† Volver</button>

  <div class="museum-head">
    <h1 class="museum-ttl">Museo de Nosotros</h1>
    <p class="museum-sub">Un espacio Ã­ntimo de nuestros recuerdos</p>
  </div>

  <div class="museum-scroll">
    <div class="moodboard">

      <!-- Col 1: grande sola -->
      <div class="mb-col">
        <div class="mb-frame mb-lg">
          <img src="foto1.jpg" alt="">
          <div class="mb-overlay"></div>
          <div class="mb-heart">â¤ï¸</div>
          <div class="mb-num">01</div>
        </div>
      </div>

      <!-- Col 2: mediano + pequeÃ±o -->
      <div class="mb-col">
        <div class="mb-frame mb-md">
          <img src="foto2.jpg" alt="">
          <div class="mb-overlay"></div>
          <div class="mb-heart">â¤ï¸</div>
          <div class="mb-num">02</div>
        </div>
        <div class="mb-frame mb-sm">
          <img src="foto3.jpg" alt="">
          <div class="mb-overlay"></div>
          <div class="mb-heart">â¤ï¸</div>
          <div class="mb-num">03</div>
        </div>
      </div>

      <!-- Col 3: pequeÃ±o + mediano -->
      <div class="mb-col">
        <div class="mb-frame mb-sm">
          <img src="foto4.jpg" alt="">
          <div class="mb-overlay"></div>
          <div class="mb-heart">â¤ï¸</div>
          <div class="mb-num">04</div>
        </div>
        <div class="mb-frame mb-md">
          <img src="foto5.jpg" alt="">
          <div class="mb-overlay"></div>
          <div class="mb-heart">â¤ï¸</div>
          <div class="mb-num">05</div>
        </div>
      </div>

      <!-- Col 4: grande sola -->
      <div class="mb-col">
        <div class="mb-frame mb-lg">
          <img src="foto6.jpg" alt="">
          <div class="mb-overlay"></div>
          <div class="mb-heart">â¤ï¸</div>
          <div class="mb-num">06</div>
        </div>
      </div>

      <!-- Col 5: mediano + pequeÃ±o -->
      <div class="mb-col">
        <div class="mb-frame mb-md">
          <img src="foto7.jpg" alt="">
          <div class="mb-overlay"></div>
          <div class="mb-heart">â¤ï¸</div>
          <div class="mb-num">07</div>
        </div>
        <div class="mb-frame mb-sm">
          <img src="foto8.jpg" alt="">
          <div class="mb-overlay"></div>
          <div class="mb-heart">â¤ï¸</div>
          <div class="mb-num">08</div>
        </div>
      </div>

      <!-- Col 6: pequeÃ±o + mediano -->
      <div class="mb-col">
        <div class="mb-frame mb-sm">
          <img src="foto9.jpg" alt="">
          <div class="mb-overlay"></div>
          <div class="mb-heart">â¤ï¸</div>
          <div class="mb-num">09</div>
        </div>
        <div class="mb-frame mb-md">
          <img src="foto10.jpg" alt="">
          <div class="mb-overlay"></div>
          <div class="mb-heart">â¤ï¸</div>
          <div class="mb-num">10</div>
        </div>
      </div>

      <!-- Col 7: grande sola -->
      <div class="mb-col">
        <div class="mb-frame mb-lg">
          <img src="foto11.jpg" alt="">
          <div class="mb-overlay"></div>
          <div class="mb-heart">â¤ï¸</div>
          <div class="mb-num">11</div>
        </div>
      </div>

      <!-- Col 8: mediano + pequeÃ±o -->
      <div class="mb-col">
        <div class="mb-frame mb-md">
          <img src="foto12.jpg" alt="">
          <div class="mb-overlay"></div>
          <div class="mb-heart">â¤ï¸</div>
          <div class="mb-num">12</div>
        </div>
        <div class="mb-frame mb-sm">
          <img src="foto13.jpg" alt="">
          <div class="mb-overlay"></div>
          <div class="mb-heart">â¤ï¸</div>
          <div class="mb-num">13</div>
        </div>
      </div>

      <!-- Col 9: pequeÃ±o + mediano -->
      <div class="mb-col">
        <div class="mb-frame mb-sm">
          <img src="foto14.jpg" alt="">
          <div class="mb-overlay"></div>
          <div class="mb-heart">â¤ï¸</div>
          <div class="mb-num">14</div>
        </div>
        <div class="mb-frame mb-md">
          <img src="foto15.jpg" alt="">
          <div class="mb-overlay"></div>
          <div class="mb-heart">â¤ï¸</div>
          <div class="mb-num">15</div>
        </div>
      </div>

      <!-- Col 10: grande sola -->
      <div class="mb-col">
        <div class="mb-frame mb-lg">
          <img src="foto16.jpg" alt="">
          <div class="mb-overlay"></div>
          <div class="mb-heart">â¤ï¸</div>
          <div class="mb-num">16</div>
        </div>
      </div>

    </div>
  </div>

  <div class="museum-hint">â† Desliza para explorar â†’</div>
</div>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• EASTER EGG â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="egg-screen" id="eggScreen">
  <button class="egg-close" onclick="closeEgg()">âœ• Cerrar</button>
  <div class="egg-content">
    <div class="egg-glow"></div>
    <p class="egg-label">ğŸ”“ CÃ³digo secreto descubierto ğŸ’•</p>
   <iframe id="eggVideo" class="egg-video"
  src="https://www.youtube.com/embed/rbNLWCXgWUA?autoplay=1&playsinline=1"
  frameborder="0"
  allow="autoplay; fullscreen"
  allowfullscreen>
</iframe>
  </div>
</div>

<script>
/* â”€â”€â”€ CONTRASEÃ‘A â”€â”€â”€ */
let pwd = '';
const CORRECT = '180325';
const EGG_CODE = '31913';

function kp(d) {
  if (pwd.length < 6) { pwd += d; renderPwd(); }
}
function kpClear() {
  pwd = ''; renderPwd();
  document.getElementById('lockErr').textContent = '';
}
function renderPwd() {
  let s = '';
  for (let i = 0; i < 6; i++) s += (i < pwd.length ? pwd[i] : '_') + ' ';
  document.getElementById('display').textContent = s.trim();
}
function kpCheck() {
  const err = document.getElementById('lockErr');

  // Easter egg
  if (pwd === EGG_CODE) {
    err.style.color = 'rgba(255,200,100,.9)';
    err.textContent = 'ğŸ”“ CÃ³digo secreto...';
    setTimeout(() => {
      document.getElementById('lockScreen').classList.add('hidden');
      openEgg();
    }, 800);
    pwd = ''; renderPwd();
    return;
  }

  if (pwd === CORRECT) {
    err.style.color = 'rgba(100,255,160,.9)';
    err.textContent = 'Â¡Bienvenido! â¤ï¸';
    setTimeout(() => {
      const L = document.getElementById('lockScreen');
      const M = document.getElementById('mainContent');
      L.classList.add('unlocking');
      setTimeout(() => {
        L.classList.add('hidden');
        M.classList.add('visible');
        startCounter();
        startDust();
        startPetalCanvas();
        startHearts();
        initScroll();
        setTimeout(petalShower, 900);
      }, 1800);
    }, 400);
  } else {
    err.style.color = 'rgba(255,80,110,.9)';
    err.textContent = 'âŒ Fecha incorrecta, intÃ©ntalo de nuevo';
    pwd = ''; renderPwd();
  }
}
document.addEventListener('keypress', e => {
  if (e.key === 'Enter' &&
      !document.getElementById('lockScreen').classList.contains('hidden')) kpCheck();
});

/* â”€â”€â”€ CONTADOR â”€â”€â”€ */
function startCounter() {
  const start = new Date('2025-06-18T00:00:00');
  function upd() {
    const diff = Date.now() - start;
    const d = Math.floor(diff / 86400000);
    const h = Math.floor((diff / 3600000) % 24);
    const m = Math.floor((diff / 60000)   % 60);
    const s = Math.floor((diff / 1000)    % 60);
    const pad = n => String(n).padStart(2,'0');
    document.getElementById('daysCounter').innerHTML =
      `${d}<br><span style="font-size:14px;font-weight:400;color:rgba(255,107,157,0.85);letter-spacing:1px;">${pad(h)}h ${pad(m)}m ${pad(s)}s</span>`;
  }
  upd(); setInterval(upd, 1000);
}

/* â”€â”€â”€ PARTÃCULAS (canvas) â”€â”€â”€ */
function startDust() {
  const cv = document.getElementById('dustCanvas');
  const cx = cv.getContext('2d');
  const rsz = () => { cv.width = innerWidth; cv.height = innerHeight; };
  rsz(); window.addEventListener('resize', rsz);

  const pts = Array.from({length: 120}, () => ({
    x: Math.random() * innerWidth,
    y: Math.random() * innerHeight,
    r: Math.random() * 2 + .4,
    vy: Math.random() * .4 + .1,
    vx: (Math.random() - .5) * .25,
    o: Math.random() * .4 + .1,
    flicker: Math.random() * Math.PI * 2,
  }));

  (function loop() {
    cx.clearRect(0, 0, cv.width, cv.height);
    const t = Date.now() * .001;
    pts.forEach(p => {
      p.y -= p.vy; p.x += p.vx;
      if (p.y < 0) { p.y = cv.height; p.x = Math.random() * cv.width; }
      if (p.x < 0) p.x = cv.width;
      if (p.x > cv.width) p.x = 0;
      const alpha = p.o * (.7 + .3 * Math.sin(t * 2 + p.flicker));
      cx.beginPath();
      cx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      cx.fillStyle = `rgba(255,107,157,${alpha})`;
      cx.fill();
    });
    requestAnimationFrame(loop);
  })();
}

/* â”€â”€â”€ PÃ‰TALOS CANVAS (igual que campo_flores) â”€â”€â”€ */
function startPetalCanvas() {
  const cv = document.getElementById('petalsCanvas');
  const cx = cv.getContext('2d');
  const rsz = () => { cv.width = innerWidth; cv.height = innerHeight; };
  rsz(); window.addEventListener('resize', rsz);

  class Petal {
    constructor(fromTop) {
      this.reset(fromTop);
    }
    reset(fromTop) {
      this.x  = Math.random() * innerWidth;
      this.y  = fromTop ? -20 : Math.random() * innerHeight;
      this.w  = Math.random() * 10 + 7;
      this.h  = this.w * .6;
      this.vy = Math.random() * 1.2 + .5;
      this.vx = (Math.random() - .5) * .8;
      this.rot = Math.random() * Math.PI * 2;
      this.rs  = (Math.random() - .5) * .05;
      this.a   = Math.random() * .4 + .3;
      this.sw  = Math.random() * .03 + .01;
      this.so  = Math.random() * Math.PI * 2;
    }
    update() {
      this.y   += this.vy;
      this.x   += this.vx + Math.sin(this.y * this.sw + this.so) * 1.2;
      this.rot += this.rs;
      if (this.y > innerHeight + 30) this.reset(true);
    }
    draw() {
      cx.save();
      cx.translate(this.x, this.y);
      cx.rotate(this.rot);
      cx.globalAlpha = this.a;
      const g = cx.createRadialGradient(0, 0, 0, 0, 0, this.w);
      g.addColorStop(0,   '#fff4f8');
      g.addColorStop(.45, var_pink);
      g.addColorStop(1,   '#8b0030');
      cx.fillStyle = g;
      cx.beginPath();
      cx.ellipse(0, 0, this.w, this.h, 0, 0, Math.PI * 2);
      cx.fill();
      cx.globalAlpha = this.a * .4;
      cx.fillStyle = 'rgba(255,255,255,.8)';
      cx.beginPath();
      cx.ellipse(-this.w * .2, -this.h * .2, this.w * .28, this.h * .28, 0, 0, Math.PI * 2);
      cx.fill();
      cx.restore();
    }
  }

  const var_pink = '#ff6b9d';
  const petals = Array.from({length: 40}, () => new Petal(false));

  (function loop() {
    cx.clearRect(0, 0, cv.width, cv.height);
    petals.forEach(p => { p.update(); p.draw(); });
    requestAnimationFrame(loop);
  })();
}

/* â”€â”€â”€ LLUVIA EXTRA de pÃ©talos (botÃ³n) â”€â”€â”€ */
function petalShower() {
  const cv = document.getElementById('petalsCanvas');
  // solo lanzar extra shower via DOM overlay temporal
  for (let i = 0; i < 60; i++) {
    setTimeout(() => {
      const d = document.createElement('div');
      const sz = Math.random() * 12 + 7;
      Object.assign(d.style, {
        position:'fixed', top:'-20px',
        left: Math.random()*100+'%',
        width: sz+'px', height: sz*.6+'px',
        borderRadius:'50%',
        background:`radial-gradient(ellipse,#fff4f8,#ff6b9d,#8b0030)`,
        opacity: Math.random()*.5+.3,
        pointerEvents:'none', zIndex:'200',
        animation:`pFall${i%3} ${Math.random()*3+3}s linear forwards`,
        transform:`rotate(${Math.random()*360}deg)`,
      });
      document.body.appendChild(d);
      setTimeout(() => d.remove(), 6500);
    }, i * 80);
  }
}

/* Keyframes pÃ©talos shower dinÃ¡micos */
const sty = document.createElement('style');
sty.textContent = `
  @keyframes pFall0{to{transform:translateY(110vh) rotate(540deg);opacity:0;}}
  @keyframes pFall1{to{transform:translateY(110vh) translateX(80px) rotate(720deg);opacity:0;}}
  @keyframes pFall2{to{transform:translateY(110vh) translateX(-80px) rotate(-540deg);opacity:0;}}
`;
document.head.appendChild(sty);

/* â”€â”€â”€ HEARTS â”€â”€â”€ */
function startHearts() {
  const c = document.getElementById('heartsContainer');
  setInterval(() => {
    const h = document.createElement('div');
    h.className = 'heart-float';
    h.textContent = 'â¤ï¸';
    h.style.left = Math.random() * 100 + '%';
    h.style.animationDuration = (Math.random() * 12 + 10) + 's';
    h.style.fontSize = (Math.random() * 14 + 10) + 'px';
    c.appendChild(h);
    setTimeout(() => h.remove(), 22000);
  }, 2200);
}

/* â”€â”€â”€ SCROLL REVEAL â”€â”€â”€ */
function initScroll() {
  const io = new IntersectionObserver(
    entries => entries.forEach(e => { if(e.isIntersecting) e.target.classList.add('show'); }),
    { threshold: .15 }
  );
  document.querySelectorAll('.section').forEach(s => io.observe(s));
}

/* â”€â”€â”€ MOUSE GLOW en botones â”€â”€â”€ */
document.querySelectorAll('.entry-btn').forEach(btn => {
  btn.addEventListener('mousemove', e => {
    const r = btn.getBoundingClientRect();
    btn.style.setProperty('--mx', ((e.clientX - r.left) / r.width * 100) + '%');
    btn.style.setProperty('--my', ((e.clientY - r.top)  / r.height * 100) + '%');
  });
});

/* â”€â”€â”€ HEART BURST (clic en tÃ­tulo) â”€â”€â”€ */
function heartBurst(ev) {
  const emojis = ['â¤ï¸','ğŸ’•','ğŸ’—','ğŸ’–','ğŸ’'];
  for (let i = 0; i < 22; i++) {
    setTimeout(() => {
      const h = document.createElement('div');
      h.textContent = emojis[i % emojis.length];
      Object.assign(h.style, {
        position:'fixed', left:ev.clientX+'px', top:ev.clientY+'px',
        fontSize:(Math.random()*18+18)+'px',
        pointerEvents:'none', zIndex:'9999',
        transition:'all 1.3s cubic-bezier(.2,0,.2,1)',
      });
      document.body.appendChild(h);
      requestAnimationFrame(() => {
        const ang = (Math.PI * 2 * i) / 22, r = 220;
        h.style.transform = `translate(${Math.cos(ang)*r}px,${Math.sin(ang)*r}px) scale(0) rotate(${Math.random()*360}deg)`;
        h.style.opacity = '0';
      });
      setTimeout(() => h.remove(), 1400);
    }, i * 40);
  }
}

/* â”€â”€â”€ EASTER EGG â”€â”€â”€ */
function openEgg() {
  const egg = document.getElementById('eggScreen');
  egg.classList.add('open');
  setTimeout(() => {
    const v = document.getElementById('eggVideo');
    v.currentTime = 0;
    v.play().catch(() => {});
  }, 800);
}
function closeEgg() {
  const egg = document.getElementById('eggScreen');
  const v   = document.getElementById('eggVideo');
  v.pause();
  egg.classList.remove('open');
  // Vuelve al lock si el main no estÃ¡ visible
  const main = document.getElementById('mainContent');
  if (!main.classList.contains('visible')) {
    const lock = document.getElementById('lockScreen');
    lock.classList.remove('hidden');
    lock.classList.remove('unlocking');
  }
}

/* â”€â”€â”€ CARTAS EMOCIONALES â”€â”€â”€ */
function openFeeling(card) {
  if (card.classList.contains('open')) return;
  // Cierra cualquier otra abierta
  document.querySelectorAll('.feeling-card.open').forEach(c => c.classList.remove('open'));
  card.classList.add('open');
  // Mini lluvia de pÃ©talos al abrir
  petalShower();
}
function closeFeeling(e, btn) {
  e.stopPropagation();
  btn.closest('.feeling-card').classList.remove('open');
}
function scrollToFeelings() {
  document.getElementById('feelingsSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
}

/* â”€â”€â”€ MENSAJES â”€â”€â”€ */
function revealMsg(card) {
  if (card.classList.contains('revealed')) return;
  card.classList.add('revealed');
  petalShower();
}

/* â”€â”€â”€ REPRODUCTOR â”€â”€â”€ */
const songs   = ['cancion1.mp3','cancion2.mp3','cancion3.mp3','cancion4.mp3','cancion5.mp3','cancion6.mp3','cancion7.mp3'];
let songIdx   = 0, isPlaying = false;
const aud     = document.getElementById('player');
const playBtn = document.getElementById('playBtn');

aud.volume = .7;
document.getElementById('volSlider').addEventListener('input', e => aud.volume = e.target.value / 100);
aud.addEventListener('ended', nextSong);

function togglePlay() {
  if (isPlaying) { aud.pause(); playBtn.textContent='â–¶'; isPlaying=false; }
  else           { aud.play();  playBtn.textContent='â¸'; isPlaying=true; }
}
function prevSong() {
  songIdx = (songIdx - 1 + songs.length) % songs.length;
  aud.src = songs[songIdx]; if(isPlaying) aud.play();
}
function nextSong() {
  songIdx = (songIdx + 1) % songs.length;
  aud.src = songs[songIdx]; if(isPlaying) aud.play();
}

/* â”€â”€â”€ MUSEO â”€â”€â”€ */
function openMuseum() {
  const M = document.getElementById('mainContent');
  const O = document.getElementById('museumOverlay');
  M.classList.add('exiting');
  setTimeout(() => { M.style.visibility='hidden'; O.classList.add('open'); }, 900);
}
function closeMuseum() {
  const M = document.getElementById('mainContent');
  const O = document.getElementById('museumOverlay');
  O.classList.remove('open');
  setTimeout(() => {
    M.style.visibility='visible';
    M.classList.remove('exiting');
  }, 1500);
}

/* â”€â”€â”€ FLORES â”€â”€â”€ */
function goFlowers() {
  document.getElementById('mainContent').classList.add('exiting');
  setTimeout(() => window.location.href = 'campo_flores.html', 900);
}
</script>
</body>
</html>
